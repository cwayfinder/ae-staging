import{c as e}from"./d1ada6f5.js";import{c as t,_ as s,p as i,q as n,a as o,L as l,h}from"./06e1fa4e.js";let d,a,r=e=>e,c=class extends l{constructor(){super(...arguments),this.doubleClickDelay=200,this.singleClickPrevent=!1,this.longPressDelay=600,this.handleClick=t=>{this.doubleClickTimer=setTimeout((()=>{this.singleClickPrevent||this.dispatchEvent(e("single-click",this.getCell(t))),this.singleClickPrevent=!1}),this.doubleClickDelay)},this.handleDoubleClick=t=>{clearTimeout(this.doubleClickTimer),this.singleClickPrevent=!0,this.dispatchEvent(e("double-click",this.getCell(t)))},this.handleMouseDown=t=>{this.singleClickPrevent=!1,this.longPressTimer=window.setTimeout((()=>{this.getMoveOffset(t)<10&&(this.dispatchEvent(e("long-press",this.getCell(t))),this.singleClickPrevent=!0)}),this.longPressDelay)},this.handleMouseMove=e=>{this.lastMoveEvent=e},this.handleMouseUp=()=>{clearTimeout(this.longPressTimer)}}render(){return h(d||(d=r``))}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick),window.addEventListener("dblclick",this.handleDoubleClick),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("touchstart",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("touchend",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("touchmove",this.handleMouseMove)}disconnectedCallback(){window.removeEventListener("click",this.handleClick),window.removeEventListener("dblclick",this.handleDoubleClick),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("touchstart",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("touchend",this.handleMouseDown),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("touchmove",this.handleMouseMove),super.disconnectedCallback()}getCell(e){let t=this.getXY(e);return{x:Math.floor(t.x/this.cellSize),y:Math.floor(t.y/this.cellSize)}}getXY(e){let t,s;if(e.touches){const i=this.getBoundingClientRect();t=e.touches[0].clientX-i.x,s=e.touches[0].clientY-i.y}else{const i=this.getBoundingClientRect();t=e.clientX-i.x,s=e.clientY-i.y}return{x:t,y:s}}getMoveOffset(e){if(!this.lastMoveEvent)return 0;const t=this.getXY(e),s=this.getXY(this.lastMoveEvent);return Math.abs(t.x-s.x)+Math.abs(t.y-s.y)}};c.styles=t(a||(a=r`:host{display:block;position:absolute;left:0;right:0;top:0;bottom:0;z-index:9}`)),s([i({type:Number})],c.prototype,"cellSize",void 0),s([n("ae-active-cell")],c.prototype,"active",void 0),s([n(".markers")],c.prototype,"markers",void 0),c=s([o("ae-event-handler-layer")],c);
