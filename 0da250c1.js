import{c as e}from"./d1ada6f5.js";import{c as t,_ as o,p as n,q as a,a as i,L as r,h as s}from"./f0da52c9.js";let d,l,p=e=>e,c=class extends r{constructor(){super(...arguments),this.cellSize=64}render(){return s(d||(d=p` <ae-top-bar playerId="${0}" color="${0}" money="${0}" @top-bar-menu-click="${0}"></ae-top-bar> <ae-field-padding> <ae-battle-field></ae-battle-field> </ae-field-padding> <ae-turn-end-button unitsLeft="${0}" disabled="${0}" @click="${0}"></ae-turn-end-button> `),this.playerId,this.color,this.money,this.openMenu,this.activeUnitsCount,!this.showEndTurnButton,this.endTurn)}updated(){this.field.scrollIntoView({block:"center"})}centerToXY(e){this.container.scrollTo({top:e.y*this.field.cellSize-120,left:e.x*this.field.cellSize-120,behavior:"smooth"})}openMenu(){var e;const t=document.createElement("ae-battle-menu");t.round=this.round,t.showEndTurnButton=this.showEndTurnButton,null===(e=this.shadowRoot)||void 0===e||e.append(t)}openNewTurnPopup(e){return new Promise((t=>{var o;const n=document.createElement("ae-new-turn");n.round=e.round,n.playerName=e.playerName,n.playerColor=e.playerColor,n.income=e.income,n.addEventListener("new-turn-close",(()=>t())),null===(o=this.shadowRoot)||void 0===o||o.append(n),e.autoClose}))}openStory(e){return new Promise((t=>{var o;const n=document.createElement("ae-story");n.text=e.content,n.illustration=e.illustration,n.addEventListener("story-next",(()=>t())),null===(o=this.shadowRoot)||void 0===o||o.append(n)}))}openNotification(e){return new Promise((t=>{var o;const n=document.createElement("ae-notification");n.header=e.header,n.text=e.content,n.addEventListener("notification-close",(()=>t())),null===(o=this.shadowRoot)||void 0===o||o.append(n),e.autoClose&&setTimeout((()=>n.close()),e.autoClose)}))}openConversation(e){return new Promise((t=>{var o;const n=document.createElement("ae-conversation");n.character=e.character,n.position=e.position,n.text=e.text,n.addEventListener("conversation-close",(()=>t())),null===(o=this.shadowRoot)||void 0===o||o.append(n)}))}openGameEnd(e){var t;const o=document.createElement("ae-game-end");o.victory=e.victory,null===(t=this.shadowRoot)||void 0===t||t.append(o)}openSaveDialog(e){var t;const o=document.createElement("ae-dialog");o.type="save";const n=document.createElement("ae-save-battle");n.name=e,n.addEventListener("save-submit",(()=>o.close())),n.addEventListener("save-cancel",(()=>o.close())),o.append(n),null===(t=this.shadowRoot)||void 0===t||t.append(o)}endTurn(){this.dispatchEvent(e("end-turn"))}openUnitStore(e){var t;const o=document.createElement("ae-unit-store");o.units=e.units,o.color=e.color,o.money=e.money,o.storeCell=e.storeCell,null===(t=this.shadowRoot)||void 0===t||t.append(o)}openUnitInfo(e){var t;const o=document.createElement("ae-unit-info");o.unit=e,null===(t=this.shadowRoot)||void 0===t||t.append(o)}};c.styles=t(l||(l=p`:host{display:grid;grid-template-rows:auto 1fr auto;position:fixed;top:0;left:0;width:100%;height:100%;background:#242a45}ae-turn-end-button{position:absolute;bottom:10px;right:20px;z-index:1}`)),o([n({type:Number})],c.prototype,"playerId",void 0),o([n({type:Number})],c.prototype,"money",void 0),o([n({type:String})],c.prototype,"color",void 0),o([n({type:Number})],c.prototype,"round",void 0),o([n({type:Number})],c.prototype,"activeUnitsCount",void 0),o([n({type:Number})],c.prototype,"cellSize",void 0),o([n({type:Boolean})],c.prototype,"showEndTurnButton",void 0),o([a("ae-field-padding")],c.prototype,"container",void 0),o([a("ae-battle-field")],c.prototype,"field",void 0),c=o([i("ae-battle")],c);
